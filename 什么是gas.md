# 什么是gas？
gas，译为“燃料”。以太坊作为平台，对用户的每一项操作都要收取手续费，而衡量应该收取手续费的多少的计量单位就是gas。  
但是我们知道区块链技术是去中心的，这个手续费交给的不是平台，当然是为你做出计算劳动的矿工（尽管你支付给的对象的确是网络，但是网络会直接按照劳动量分配给矿工）。而平台只是表明多少计算量需要多少的gas。需要越多计算资源的操作自然需要的gas越多。  
但是gas是没有任何实际的标记（token）的，也就是说你不能拥有1000个gas之类的，gas只存在与以太坊虚拟机的内部，计算你所需的操作消耗的gas数量。以太坊会直接计算你的操作需要多少计算资源，然后将他们换算成gas。在你支付的时候，它们在换算成ether（以太坊内置机制中矿工生成区块记录内容的奖励）。  
# 为什么需要gas
以太坊直接有ether作为货币，为什么不直接以ether交易呢？这是由于以太坊在交易所进行公开买卖，它的价格会飘忽不定，这样你在以太坊内的操作的价格就会可能剧烈波动，在以太币的价格较低时如果人们交易量很大，那么可能就会形成“峰谷效应”，也就是执行量过大，造成平台超负荷运行。而gas可以缓解这一过程。等量计算资源消耗的操作所需要的gas数量是不变的，是事先确定的。  
# 如何支付gas
`你最终的成本 = gas数量*gas单价`  
我每进行一个操作，都需要提前标注好自己的gas单价，然后附加上实际的以太币。你的gas单价会决定你在队列中的优先度，大家当然愿意先服务单价高的客户。接下来的情况就和你附加的以太币的数量有关了。  
矿工们每付出一些计算资源他们就会得到奖励，他们不会预先知道你附加的以太币是否足够支付整个操作，所以你的以太币是一点点被消耗的。矿工们的付出和获得是需要持久的，当停止支付时他们就会停止工作。所以如果你进行的`操作需要的gas数量*你标记的gas单价 > 你附加的以太币`，当你的以太币消耗完了之后，他们就会停止工作。然后他们会还原之前的处理，但是仍然会把这项交易失败的记录写入区块里，作为收取你费用的记录。而你会被提示  
`您的交易中出现的gas与您的交易之间存在差异，没有足够高的费用来支持交易（out of gas）`  
你可能会觉得这个设计很坑，操作失败了竟然不给我退款，但是这是为了整个系统的稳定，矿工们付出了劳动，理应得到奖励。这要求每一个请求操作的人都谨慎的处理自己的代码，并且保证了系统的安全性，对整个系统来说是有益的。  
而如果你支付的以太币足够多，当请求的操作结束之后，会退还给你附加的多余的以太币。
# gas的限制
我们知道交易储存在区块中。在以太坊里，每个区块都有gas上限。待执行的交易要消耗的gas不能超过这个上限，这样就避免了所有区块都储存在最后一个区块里，达到gas上限后，其他交易就不能写入这个区块了，就会逼迫矿工挖矿，挖出下一个节点。这样可以保证整个系统的区块不断延长，保证整个系统的安全性。

